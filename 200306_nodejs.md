# π‘©β€π’»

## NodeJs

### λ¨λ“ μ‹μ¤ν…

*λ…Έλ“λ” νμΌν•νƒλ΅ λ¨λ“μ„ κ΄€λ¦¬ν•  μ μλ” **CommonJs** λ΅ κµ¬ν„.*

*λ¨λ“μ΄ μ—†μ„ λ• ? μ „μ—­κ³µκ°„μ„ μ¤μ—Όμ‹ν‚¬ μ μλ‹¤*

* κΈ°λ³Έ λ¨λ“

  ```js
  //index.js
  //λ…Έλ“μ κΈ°λ³Έ λ¨λ“ μ¤‘ ν•λ‚μΈ http λ¨λ“
  const http = require('http');
  
  http.createServer();
  
  ```

  

* μ¨λ“νν‹° λ¨λ“

* μ‚¬μ©μ μ •μ λ¨λ“

  ```js
  //math.js
  function sum (a, b) {
    return a + b;
  }
  module.exports = {
    sum : sum
  };
  
  //index.js
  const math = require('./math.js');
  const result = math.sum(1,2);
  console.log(result);
  
  ```



### λΉ„λ™κΈ°

* **λ…Έλ“λ” κΈ°λ³Έμ μΌλ΅ λΉ„λ™κΈ°λ΅ λ™μ‘ν•λ‹¤.**
* `readFile()` vs `readFileSync()`

```js
//File System module

//./data.txt
'this is data file'

//readFileSync()
const fs = require('fs');
const data = fs.readFileSync('./data.txt', 'utf8');

console.log(data); //'this is data file'
```

```js
//readFile() λΉ„λ™κΈ°
const fs = require('fs');

const data = fs.readFile('./data.txt', 'utf8', (err, data) => {
  console.log(data)
});

```



#### Node Hello world

[NodeJS hello world code](https://nodejs.org/dist/latest-v6.x/docs/api/synopsis.html)

```js
const http = require('http');

const hostname = '127.0.0.1';
const port = 3000;

const server = http.createServer((req, res) => {
  res.statusCode = 200;
  res.setHeader('Content-Type', 'text/plain');
  res.end('Hello World\n');
});

server.listen(port, hostname, () => {
  console.log(`Server running at http://${hostname}:${port}/`);
});
```

```bash
node index.js
```

λ΅ μ„λ²„λ¥Ό μ‹¤ν–‰μ‹ν‚¤κ³ ,

```bash
curl -X GET 'localhost:3000'
```

`curl` : http μ”μ²­μ„ λ³΄λ‚Ό μ μλ” μ»¤λ§¨λ“λΌμΈ λ…λ Ήμ–΄



**λ¶„μ„**

```js
const http = require('http');
```

Node μ κΈ°λ³Έ λ¨λ“ μ¤‘ http λ¨λ“μ„ κ°€μ Έμ¨λ‹¤.

 ```js
const hostname = '127.0.0.1';
const port = 3000;
 ```

λ‚΄ μ»΄ν“¨ν„°λ¥Ό λ§ν•λ” '127.0.0.1' μ„ hostname μ— ν• λ‹Ή, port λ²νΈλ” 3000μΌλ΅ ν• λ‹Ήν•λ‹¤.

μ„λ²„λ¥Ό κµ¬μ„±ν•  λ•λ” λ‚΄ μ»΄ν“¨ν„°μ μ£Όμ†κ°€ μ–΄λ–»κ² λλ”μ§€κ°€ μ²«λ²μ§Έ, μ„¤μ •μ„ ν•΄μ¤μ•Ό ν•κ³ , μ΄ μ»΄ν“¨ν„°μ—λ” μλ§μ€ ν¬νΈ λ²νΈλ“¤μ΄ μλ”λ° κ·Έ ν¬νΈ μ¤‘μ— μ–΄λ–¤ ν¬νΈλ¥Ό μ—΄ κ²ƒμΈμ§€λ¥Ό μ„¤μ •ν•΄μ¤μ•Ό ν•λ‹¤.

```js
const server = http.createServer((req, res) => {
  res.statusCode = 200;
  res.setHeader('Content-Type', 'text/plain');
  res.end('Hello World\n');
});
```

httpμ λ©”μ†λ“ μ¤‘ `createServer` λΌλ” ν•¨μλ¥Ό μ‚¬μ©. μ½λ°± ν•¨μλ¥Ό λ„£μ–΄μ£Όλ”λ°, ν΄λΌμ΄μ–ΈνΈκ°€ μ ‘μ†ν–μ„ λ• λ™μ‘ν•λ” ν•¨μμ΄λ‹¤. κ·Έ κ²°κ³Όλ¥Ό server λ³€μμ— ν• λ‹Ή.

μ½λ°±ν•¨μμ—λ” νλΌλ―Έν„°λ΅ `request`, `response` λ¥Ό λ°›λ”λ‹¤.

`res.statusCode = 200` : 200μΌλ΅ μ„¤μ • (200 : μ„±κ³µ)

`res.setHeader('Content-Type', 'text/plain')` : headerμ 'Content-Type' μ€ 'text/plain' μΌλ΅ ν•λ‹¤λ” λ»

`res.end('Hello World\n')` : end λΌλ” ν•¨μλ¥Ό μ΄μ©ν•΄μ„ ν΄λΌμ΄μ–ΈνΈν•ν… 'hello world' λ¥Ό λ³΄λ‚΄ μ£Όλ” κ²ƒ

```js
server.listen(port, hostname, () => {
  console.log(`Server running at http://${hostname}:${port}/`);
});
```

`listen` λ©”μ†λ“λ” μ„λ²„λ¥Ό μ”μ²­λ€κΈ°μƒνƒλ΅ λ§λ“¤μ–΄μ£Όλ” ν•¨μ. 

μ”μ²­λ€κΈ°μƒνƒ => μ„λ²„κ°€ ν΄λΌμ΄μ–ΈνΈμ μ”μ²­μ„ λ°›κΈ°μ„ν•΄μ„ μΆ…λ£ν•μ§€ μ•κ³  λ€κΈ°ν•λ„λ΅ ν•λ” μƒνƒ

`listen` ν•¨μλ” νλΌλ―Έν„°λ¥Ό μ΄ 3κ°λ¥Ό λ°›λ”λ‹¤. 

* port λ²νΈ ? : number
* hostname ? : string
* callback ? : λ¦¬μ¨ ν•¨μκ°€ μ™„λ£λλ©΄ νΈμ¶λλ” ν•¨μ

#### routing

β“**`λΌμ°ν…` μ”μ²­ urlμ— λ”°λΌ μ²λ¦¬ν•λ” κ²ƒ**

μ„μ κ²½μ°μ²λΌλ§ λ§λ“¤κ²½μ°, λ¨λ“  κ²½λ΅μ—μ„ 'hello world'λ§ μ¶λ ¥μ΄ λλ‹¤. (μ: 'localhost:3000/users')

μ”μ²­ν• κ²½λ΅μ— λ”°λΌμ„ κ²½λ΅μ— λ§κ² λ¶„κΈ°λ¥Ό λ‚λ μ£Όλ©΄ λλ‹¤

```js
const server = http.createServer((req, res) => {
  console.log(req.url);
  res.statusCode = 200;
  res.setHeader('Content-Type', 'text/plain');
  res.end('Hello World\n');
});
```

*μ²«λ²μ§Έ νλΌλ―Έν„° request μ— μλ” urlμ€ μ”μ²­λ urlλ¥Ό κ°€μ Έμ¨λ‹¤.*

`console.log(req.url)` λ¥Ό λ„£μ–΄μ„ `localhost:3000` μ‹¤ν–‰μ„ ν•΄λ³΄μ.
`/` κ°€ λ¨λ” κ²ƒμ„ ν™•μΈν•  μ μλ‹¤.
`localhost:3000/users` λ΅ μ‹¤ν–‰ν•΄λ³΄λ©΄,
`/users` κ°€ λ¨λ” κ²ƒμ„ ν™•μΈ ν•  μ μμ„ κ²ƒμ΄λ‹¤.

μ΄λ° μ‹μΌλ΅ λ¶„κΈ°μ²λ¦¬κ°€ κ°€λ¥ν•λ‹¤.

```js
const http = require('http');

const hostname = '127.0.0.1';
const port = 3000;

const server = http.createServer((req, res) => {
  if (req.url === '/') {
  	res.statusCode = 200;
    res.setHeader('Content-Type', 'text/plain');
    res.end('Hello World\n');  
  } else if (req.url === '/users') {
    res.statusCode = 200;
    res.setHeader('Content-Type', 'text/plain');
    res.end('User list');
  }else {
    res.statusCode = 404;
    res.end('Not Found');
  }
});

server.listen(port, hostname, () => {
  console.log(`Server running at http://${hostname}:${port}/`);
});
```

ν•μ§€λ§, μ΄λ° μ‹μΌλ΅ ν•λ‹¤κ°„ λ¶„κΈ°λ¬Έλ„ κΈΈμ–΄μ§€κ² λκ³ , νμΌμ€ μ»¤μ§€κ² λλ©°, μ¤‘λ³µ μ½”λ“κ°€ λ°μƒν•κ² λλ”λ° ..

κ·Έλμ„ http λ¨λ“λ§ μ‚¬μ©ν•  κ² μ•„λ‹λΌ, Node μ express λ¥Ό μ‚¬μ©ν•κ² λλ” κ²ƒ.!
